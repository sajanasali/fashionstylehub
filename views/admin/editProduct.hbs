{{>adminheader}}


<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

                
               
<style>
  label {
    font-weight: 600;
  }

  .btn-primary {
    width: 100%;
    margin-top: 1em;
  }

  .error-message {
    color: red;
    margin-top: 5px;
    text-align: center;
  }
</style>




<link rel="stylesheet" href="/css/adminCss/addproduct.css" type="text/css">




<div class="content p-5">
  <!-- Navbar Start -->
 
  <div class="container" style="margin: 150;">
    <div class="row ">
      <div class="col-lg-3 col-md-3 login-box"></div>
      <div class="col-lg-6 col-md-8 login-box">

        <h2 class="px-5 m-8"><span class="px-5 m-8">EDIT PRODUCT</span></h2>
        {{#if message}}
        <div class="alert alert-success mt-3">
          {{message}}
        </div>
        {{/if}}
        {{#if message1}}
        <div class="alert alert-danger mt-3">
          {{message1}}
        </div>
        {{/if}}

        <form action="" method="post" enctype="multipart/form-data">
          <div class="form-group">
            <label for="name">Product Name</label>
            <input type="text" id="name" name="name" value="{{Product.name}}" class="form-control">
            {{#if errors.name}}
            <div class="error-message">{{errors.name}}</div>
            {{/if}}
          </div>

          <div class="form-group">
            <label for="description">Product Description</label>
            <div class="form-group">
              <input placeholder="description" id="description" name="description"  value="{{Product.description}}"  class="form-control" rows="3"
                value="{{Product.description}}"></input>
            </div> {{!-- <input type="text" id="name" maxlength="4  0" name="description"> --}}
            {{#if errors.description}}
            <div class="error-message">{{errors.description}}</div>
            {{/if}}
          </div>

          
          
          

          <div class="form-group">
            <label for="category">Category</label>
  
            <select id="category" name="category" class="form-control">
               <option class="categoryName" selected value="{{Product.category._id}}">{{Product.category.name}}</option>
                            {{#each categorydata}}
                            <option value="{{this.id}}">{{this.name}}</option>
                            {{/each}} 
            </select>
            
            {{#if errors.categorydata}}
            <div class="error-message">{{errors.categorydata}}</div>
            {{/if}}
          </div>

          <div class="form-group">
            <label for="brand">Brand</label>
            <input type="text" id="brand" name="brand" value="{{Product.brand}}" class="form-control">
            {{#if errors.brand}}
            <div class="error-message">{{errors.brand}}</div>
            {{/if}}
          </div>
          <div class="form-group">
            <label for="brand">Quantity</label>
            <input type="text" id="quantity" name="quantity" value="{{Product.quantity}}" class="form-control">
            {{#if errors.quantity}}
            <div class="error-message">{{errors.quantity}}</div>
            {{/if}}
          </div>

          <div class="form-group">
            <label for="price">Price</label>
            <div class="input-group">
              <div class="input-group-prepend">
                <span class="input-group-text">â‚¹</span>
              </div>
              <input type="number" id="price" name="price" value="{{Product.price}}" class="form-control">

            </div>
            {{#if errors.price}}
            <div class="error-message">{{errors.price}}</div>
            {{/if}}
          </div>

          
          <div class="form-group">
            <label for="name">image</label>
             <img src="/images/{{Product.image.[0]}}" style="width: 100px;">
                          <img src="/images/{{Product.image.[1]}}" style="width: 100px;">
             <div id="image-preview"></div>


            <input type="file" id="name" name="image" class="form-control" value="{{Product.image}}" multiple onchange="previewImages(event)">
           
            {{#if errors.images}}
            <div class="error-message">{{errors.images}}</div>
            {{/if}}
          </div>

          <button type="submit" class="btn btn-primary">Update Product</button>
        </form>

      </div>
    </div>
  </div>
</div>
{{>adminfooter}}
<script>



function previewImages(event) {
  const imagePreview = document.getElementById('image-preview');
  imagePreview.innerHTML = ''; // Clear previous previews

  const fileInput = event.target;
  const files = fileInput.files;

  for (let i = 0; i < files.length; i++) {
    const file = files[i];
    const reader = new FileReader();

    reader.onload = function (e) {
      const img = document.createElement('img');
      img.src = e.target.result;
      img.style.maxWidth = '100px'; // Adjust the width as needed
      imagePreview.appendChild(img);
    };

    reader.readAsDataURL(file);
  }
}

  

</script>
